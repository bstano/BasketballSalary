---
title: "Basketball Salary"
author: "Ben Stano, ADD NAMES"
date: "2/16/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Baseketballs Brooooo

```{r}
library(tidyverse)
```

## Importing Data

```{r}
players <- read_csv("../data/players.csv")
stats.36 <- read_csv("../data/PlayerStatisticsPer36Min.csv")
stats.100 <- read_csv("../data/PlayerStatisticsPer100Poss.csv")
stats.g <- read_csv("../data/PlayerStatisticsPerGame.csv")
salary <- read_csv("../data/salaries_1985to2018.csv")
#new data?
salary2 <- read_csv("../data/nba-salaries.csv")
```

## Cleaning and Merging Data

```{r}
stats.g <- stats.g %>%
  mutate(name = str_replace(Player, "\\*", ""))
stats.g <- stats.g %>%
  mutate(key = str_c(name, as.character(year), sep = ""))
salary2 <- salary2 %>%
  mutate(key = str_c(name, as.character(season), sep = ""))
```

### Joining the Datasets

```{r}
final.data <- players %>%
  inner_join(salary2, by = "name") %>%
  inner_join(stats.g, by = "key") %>%
  select(-key) %>%
  filter(year >= 2017)

write_csv(final.data, "../data/final_data.csv")

head(final.data)
```
### Deliverabe 2

```{r}
final.data %>%
  select(`FG%`, TOV, FG, AST, DRB, salary) ->
prelim.data

prelim.lm <- lm(salary ~ ., data = prelim.data)

plot(prelim.lm, which = 1)

plot(prelim.lm, which = 2)
```

```{r}
library(GGally)

ggpairs(prelim.data)
```

### Cleaning the Data

```{r}
# displaying null values in each column
final.data %>%
  map_dbl(~sum(is.na(.))) %>%
  unname() ->
na.dbl

na.cols <- data.frame("variable" = colnames(final.data),
                      "null.count" = na.dbl)

na.cols %>%
  filter(null.count > 0)
```


## Dimensionality Reduction

### Ridge/LASSO

### Feature Engineering

## Modeling

Possible Models:

OLS Regression

WLS Regression

GLM Regression

Regression Trees

Neural Networks


